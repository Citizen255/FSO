<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

  <input type="text" id="searchInput" placeholder="Search...">
  <ul id="suggestions"></ul>

  <script>
    class TrieNode {
      constructor() {
        this.children = {};
        this.isEndOfWord = false;
      }
    }

    class Trie {
      constructor() {
        this.root = new TrieNode();
      }

      insert(word) {
        let node = this.root;
        for (let char of word) {
          if (!node.children[char]) {
            node.children[char] = new TrieNode();
          }
          node = node.children[char];
        }
        node.isEndOfWord = true;
      }

      findSuggestions(prefix) {
        let node = this.root;
        for (let char of prefix) {
          if (!node.children[char]) {
            return [];
          }
          node = node.children[char];
        }
        return this._getAllWords(node, prefix);
      }

      _getAllWords(node, currentPrefix) {
        let suggestions = [];
        if (node.isEndOfWord) {
          suggestions.push(currentPrefix);
        }

        for (let [char, childNode] of Object.entries(node.children)) {
          suggestions = suggestions.concat(this._getAllWords(childNode, currentPrefix + char));
        }

        return suggestions;
      }
    }

    const dictionary = {
      'Little Big Planet 2': '8b7fbe7c0329662d88abc94fafab02bbe3705966',
      'Little Big Planet': '660f08f941b7b3c54801d500a17a8bd742b20f4e',
      'Grand Theft Auto 5': '770962896251a8bb3666ffffaae80b3f33b27e5a'
      // Add more key-value pairs as needed
    };

    const trie = new Trie();
    Object.keys(dictionary).forEach(key => trie.insert(key));

    $(document).ready(function () {
      const searchInput = $("#searchInput");
      const suggestionsList = $("#suggestions");

      searchInput.on("input", function () {
        const searchTerm = searchInput.val();
        const matchingKeys = trie.findSuggestions(searchTerm);

        // Clear previous suggestions
        suggestionsList.empty();

        // Display matching keys in the suggestions list as links
        matchingKeys.forEach(key => {
          suggestionsList.append(`<li><a href="#">${key}</a></li>`);
        });
      });

      // Handle click events on suggestion links
      suggestionsList.on("click", "a", function (event) {
        event.preventDefault();
        const clickedSuggestion = $(this).text();
        // Do something with the clicked suggestion, e.g., fill the search bar
        window.location.href = 'magnet:?xt=urn:btih:' + dictionary[clickedSuggestion];
      });
    });
  </script>

</body>
</html>
